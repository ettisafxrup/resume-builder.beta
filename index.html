<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Resume Builder â€“ Ettisaf Style</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet"/>

  <style>
    :root {
      --text: #111;
      --gray: #444;
      --light: #666;
      --lighter: #888;
      --bg: #fff;
      --sidebar: #f9f9f9;
    }

    * { box-sizing: border-box; margin:0; padding:0; }
    body {
      font-family: 'Roboto', sans-serif;
      background: #f4f4f4;
      color: var(--text);
      line-height: 1.5;
      padding: 20px;
    }

    .container { max-width: 1100px; margin: 0 auto; }

    header h1 {
      text-align: center;
      font-size: 2.4rem;
      font-weight: 700;
      margin-bottom: 2.5rem;
      color: #000;
    }

    /* FORM */
    #form-area {
      background: white;
      border-radius: 10px;
      box-shadow: 0 4px 16px rgba(0,0,0,0.08);
      padding: 28px;
      margin-bottom: 3rem;
    }

    label { font-weight:500; color:#444; display:block; margin:1.2rem 0 0.5rem; font-size:0.97rem; }
    input, textarea {
      width:100%; padding:0.75rem 1rem; border:1px solid #ccc; border-radius:6px; font-size:0.98rem;
    }
    textarea { min-height:110px; }

    .section { margin:2rem 0; padding-top:1.2rem; border-top:1px solid #eee; }
    .section h3 { color:#222; margin-bottom:0.9rem; }

    .add-btn {
      background:#333; color:white; border:none; padding:0.6rem 1.2rem; border-radius:6px; cursor:pointer; margin-top:0.6rem;
    }
    .add-btn:hover { background:#111; }

    #generate {
      display:block; margin:2.5rem auto; background:#28a745; color:white; border:none;
      padding:0.95rem 3.5rem; font-size:1.08rem; border-radius:8px; cursor:pointer;
    }
    #generate:hover { background:#218838; }

    /* RESUME */
    #preview-area { display:none; }

    #resume {
      background:white;
      box-shadow:0 6px 24px rgba(0,0,0,0.1);
      border-radius:10px;
      overflow:hidden;
      max-width:950px;
      margin:0 auto 4rem;
      display:grid;
      grid-template-columns: 320px 1fr;
      font-size:0.97rem;
    }

    .sidebar {
      background:var(--sidebar);
      padding:3.5rem 2rem 3rem;
    }

    .sidebar h1 { font-size:2.1rem; font-weight:700; margin-bottom:0.4rem; line-height:1.05; }
    .sidebar .title { font-size:1.12rem; font-weight:500; color:var(--gray); margin-bottom:2.4rem; }

    .sidebar h2 {
      font-size:1.18rem; font-weight:600; margin:2.2rem 0 0.9rem; color:#000;
      border-bottom:1px solid #ddd; padding-bottom:0.4rem;
    }

    .sidebar p, .sidebar a { color:var(--light); margin:0.5rem 0; font-size:0.94rem; }
    .sidebar .icon { margin-right:0.9rem; width:1.2rem; text-align:center; color:#555; }

    .main { padding:3.5rem 2.8rem; }

    .main h2 {
      font-size:1.42rem; font-weight:700; color:#000; margin:2.6rem 0 1rem;
      border-bottom:1.5px solid #000; padding-bottom:0.45rem;
    }

    .main p { margin:0.7rem 0; }

    .main ul { padding-left:1.5rem; margin:0.7rem 0; list-style:none; }
    .main li { position:relative; margin:0.4rem 0; padding-left:1.4rem; }
    .main li::before { content:"â€¢"; position:absolute; left:0; color:#444; }

    .cert-item {
      margin-bottom: 1.4rem;
    }
    .cert-item strong {
      display: block;
      font-size: 1.05rem;
      margin-bottom: 0.15rem;
    }
    .cert-meta {
      color: var(--light);
      font-size: 0.93rem;
      margin-bottom: 0.3rem;
    }

    .skills-container {
      display:flex; flex-wrap:wrap; gap:0.55rem 0.7rem; margin:1.1rem 0 2.2rem;
    }
    .skill-chip {
      background:#e9e9e9; color:#333; padding:0.38rem 0.88rem; border-radius:2rem;
      font-size:0.9rem; font-weight:500;
    }

    .hobbies-container {
      display:flex; flex-wrap:wrap; gap:1.8rem 2.4rem; margin-top:1.2rem; font-size:1.6rem;
    }
    .hobby { text-align:center; line-height:1.25; }
    .hobby-emoji { font-size:2.4rem; display:block; margin-bottom:0.4rem; }
    .hobby-text { font-size:0.87rem; color:var(--light); }

    #download-pdf {
      display:none; margin:0 auto 5rem; background:#dc3545; color:white; border:none;
      padding:1rem 4rem; font-size:1.06rem; border-radius:8px; cursor:pointer;
    }
    #download-pdf:hover { background:#c82333; }

    @media (max-width:900px) {
      #resume { grid-template-columns:1fr; }
      .sidebar { border-bottom:1px solid #eee; }
    }
  </style>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>

<div class="container">
  <header><h1>Resume Builder â€“ Ettisaf Style</h1></header>

  <section id="form-area">
    <form id="resume-form">
      <label>Full Name</label>
      <input type="text" id="name" required placeholder="ETTISAF RUP"/>

      <label>Aspiring Title</label>
      <input type="text" id="title" required placeholder="ASPIRING SOFTWARE ENGINEER"/>

      <label>Phone</label>
      <input type="tel" id="phone" required placeholder="+880 1303 342438"/>

      <label>Email</label>
      <input type="email" id="email" required placeholder="ettisaf rup @gmail.com"/>

      <label>Location</label>
      <input type="text" id="location" placeholder="Rajshahi, Bangladesh"/>

      <label>About Me</label>
      <textarea id="about" placeholder="Aspiring Computer Engineer...&#10;Passionate about..."></textarea>

      <div class="section">
        <h3>Work Experience</h3>
        <div id="exp-container"></div>
        <button type="button" class="add-btn" onclick="addExp()">+ Add Experience</button>
      </div>

      <div class="section">
        <h3>Education</h3>
        <div id="edu-container"></div>
        <button type="button" class="add-btn" onclick="addEdu()">+ Add Education</button>
      </div>

      <!-- â”€â”€ New Certifications Section â”€â”€ -->
      <div class="section">
        <h3>Certifications</h3>
        <div id="cert-container"></div>
        <button type="button" class="add-btn" onclick="addCert()">+ Add Certification</button>
      </div>

      <div class="section">
        <h3>Skills (comma separated)</h3>
        <textarea id="skills" placeholder="C, C++, Go, Bash, JavaScript, DSA, LeetCode, React.js, Docker, Git, ..."></textarea>
      </div>

      <div class="section">
        <h3>Languages (one per line)</h3>
        <textarea id="languages" placeholder="English (Professional)&#10;Bengali (Native)&#10;Hindi/Urdu (Fluent)"></textarea>
      </div>

      <div class="section">
        <h3>Hobbies (one per line â€“ emoji optional)</h3>
        <textarea id="hobbies" placeholder="â™ª Music&#10;ðŸ“š Books&#10;â˜• Coffee&#10;â¤ï¸ Nature"></textarea>
      </div>

      <div class="section">
        <h3>Social Links (one per line: platform name)</h3>
        <textarea id="links" placeholder="Facebook&#10;LinkedIn&#10;GitHub"></textarea>
      </div>

      <div class="section">
        <h3>References text (optional)</h3>
        <input type="text" id="references" placeholder="Available upon request"/>
      </div>
    </form>

    <button id="generate" onclick="generateResume()">Generate Resume</button>
  </section>

  <section id="preview-area">
    <h2 style="text-align:center; margin:3.5rem 0 2rem">Resume Preview</h2>
    <div id="resume">
      <div class="sidebar" id="sidebar"></div>
      <div class="main" id="main"></div>
    </div>

    <button id="download-pdf" onclick="downloadPDF()">Download PDF</button>
  </section>
</div>

<script>
let expCount = 0, eduCount = 0, certCount = 0;

function addExp() {
  expCount++;
  document.getElementById("exp-container").insertAdjacentHTML("beforeend", `
    <div style="margin:1.2rem 0; padding:1.2rem; background:#f8f9fa; border-radius:8px;">
      <label>Company / Project</label><input id="exp-company-${expCount}" placeholder="Remote | Proxima IT">
      <label>Role</label><input id="exp-title-${expCount}" placeholder="Technical Lead">
      <label>Dates</label><input id="exp-dates-${expCount}" placeholder="June 2025 â€“ August 2025">
      <label>Description</label><textarea id="exp-desc-${expCount}" placeholder="â€¢ Built...&#10;â€¢ Optimized..."></textarea>
    </div>
  `);
}

function addEdu() {
  eduCount++;
  document.getElementById("edu-container").insertAdjacentHTML("beforeend", `
    <div style="margin:1.2rem 0; padding:1.2rem; background:#f8f9fa; border-radius:8px;">
      <label>Degree / Level</label><input id="edu-degree-${eduCount}" placeholder="B.Sc, CSE">
      <label>Institution</label><input id="edu-inst-${eduCount}" placeholder="KUET">
      <label>Dates</label><input id="edu-dates-${eduCount}" placeholder="2025 â€“ Present">
      <label>Note (optional)</label><input id="edu-note-${eduCount}" placeholder="Undergraduate">
    </div>
  `);
}

// New: Add Certification
function addCert() {
  certCount++;
  document.getElementById("cert-container").insertAdjacentHTML("beforeend", `
    <div style="margin:1.2rem 0; padding:1.2rem; background:#f8f9fa; border-radius:8px;">
      <label>Certification Name</label>
      <input id="cert-name-${certCount}" placeholder="AWS Certified Solutions Architect â€“ Associate">

      <label>Issuing Organization</label>
      <input id="cert-issuer-${certCount}" placeholder="Amazon Web Services">

      <label>Date / Validity (e.g. Issued Jun 2024 Â· Expires Jun 2027)</label>
      <input id="cert-date-${certCount}" placeholder="Jun 2024">

      <label>Short Description / Credential ID (optional)</label>
      <textarea id="cert-desc-${certCount}" placeholder="Credential ID: ABC123XYZ&#10;Skills validated: Cloud Architecture, VPC, EC2, S3..."></textarea>
    </div>
  `);
}

function generateResume() {
  const name  = document.getElementById("name").value.trim()  || "ETTISAF RUP";
  const title = document.getElementById("title").value.trim() || "ASPIRING SOFTWARE ENGINEER";
  const phone = document.getElementById("phone").value.trim();
  const email = document.getElementById("email").value.trim();
  const loc   = document.getElementById("location").value.trim();
  const about = document.getElementById("about").value.trim();

  if (!name || !title || !phone || !email) return alert("Name, Title, Phone, Email required.");

  // Sidebar
  document.getElementById("sidebar").innerHTML = `
    <h1>${name}</h1>
    <div class="title">${title}</div>

    <h2>CONTACTS</h2>
    ${phone ? `<p><i class="fas fa-phone icon"></i>${phone}</p>`:""}
    ${email ? `<p><i class="fas fa-envelope icon"></i>${email}</p>`:""}
    ${loc   ? `<p><i class="fas fa-map-marker-alt icon"></i>${loc}</p>`:""}

    <h2>LINKS</h2>
    <div id="links-list"></div>

    <h2>REFERENCES</h2>
    <p>â€¢ ${document.getElementById("references").value.trim() || "Available upon request"}</p>

    <h2>LANGUAGES</h2>
    <div id="langs-list"></div>
  `;

  // Links
  const linksTxt = document.getElementById("links").value.trim();
  if (linksTxt) {
    document.getElementById("links-list").innerHTML = linksTxt
      .split("\n").filter(Boolean)
      .map(l => `<p>${l.trim()}</p>`).join("");
  }

  // Languages
  const langsTxt = document.getElementById("languages").value.trim();
  if (langsTxt) {
    document.getElementById("langs-list").innerHTML = langsTxt
      .split("\n").filter(Boolean)
      .map(l => `<p>${l.trim()}</p>`).join("");
  }

  // Main
  document.getElementById("main").innerHTML = `
    <h2>ABOUT ME</h2>
    <p>${about ? about.replace(/\n/g, "<br>") : "Professional summary here..."}</p>

    <h2>WORK EXPERIENCE</h2>
    <div id="exp-items"></div>

    <h2>EDUCATION</h2>
    <div id="edu-items"></div>

    <h2>CERTIFICATIONS</h2>
    <div id="cert-items"></div>

    <h2>SKILLS</h2>
    <div class="skills-container" id="skills-list"></div>

    <h2>HOBBIES</h2>
    <div class="hobbies-container" id="hobbies-list"></div>
  `;

  // Certifications (new)
  let certHtml = "";
  for (let i = 1; i <= certCount; i++) {
    const name   = document.getElementById(`cert-name-${i}`)?.value.trim()   || "";
    const issuer = document.getElementById(`cert-issuer-${i}`)?.value.trim() || "";
    const date   = document.getElementById(`cert-date-${i}`)?.value.trim()   || "";
    const desc   = document.getElementById(`cert-desc-${i}`)?.value.trim()   || "";

    if (name) {
      certHtml += `
        <div class="cert-item">
          <strong>${name}</strong>
          ${issuer || date ? `<div class="cert-meta">${[issuer, date].filter(Boolean).join(" â€¢ ")}</div>` : ""}
          ${desc ? `<p style="margin-top:0.4rem;">${desc.replace(/\n/g, "<br>")}</p>` : ""}
        </div>
      `;
    }
  }
  document.getElementById("cert-items").innerHTML = certHtml || "<p style='color:#777;'>No certifications added yet.</p>";

  // Skills
  const skillsTxt = document.getElementById("skills").value.trim();
  if (skillsTxt) {
    const skills = skillsTxt.split(/[,;]/).map(s=>s.trim()).filter(Boolean);
    document.getElementById("skills-list").innerHTML = skills
      .map(s => `<span class="skill-chip">${s}</span>`)
      .join("");
  }

  // Hobbies
  const hobbiesTxt = document.getElementById("hobbies").value.trim();
  if (hobbiesTxt) {
    const lines = hobbiesTxt.split("\n").filter(Boolean);
    let html = "";
    lines.forEach(line => {
      let [emoji = "â€¢", ...textParts] = line.trim().split(/\s+/);
      if (!emoji.match(/[\u{1F300}-\u{1FFFF}]/u)) {
        textParts.unshift(emoji);
        emoji = "â€¢";
      }
      html += `<div class="hobby">
        <span class="hobby-emoji">${emoji}</span>
        <div class="hobby-text">${textParts.join(" ")}</div>
      </div>`;
    });
    document.getElementById("hobbies-list").innerHTML = html;
  }

  // Experience & Education (unchanged logic â€“ omitted for brevity, copy from previous version if needed)

  // ... paste your existing experience + education loop code here ...

  document.getElementById("preview-area").style.display = "block";
  document.getElementById("download-pdf").style.display = "block";
  document.getElementById("preview-area").scrollIntoView({behavior:"smooth"});
}

async function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF({ unit: "mm", format: "a4" });

  const el = document.getElementById("resume");

  try {
    const canvas = await html2canvas(el, {
      scale: 1.8,
      useCORS: true,
      logging: false,
      backgroundColor: "#ffffff",
      windowWidth: el.scrollWidth,
      windowHeight: el.scrollHeight
    });

    const imgData = canvas.toDataURL("image/jpeg", 0.89);
    const pdfW = doc.internal.pageSize.getWidth();
    const pdfH = doc.internal.pageSize.getHeight();
    const ratio = Math.min(pdfW / canvas.width, pdfH / canvas.height);
    doc.addImage(imgData, "JPEG", 0, 0, canvas.width * ratio, canvas.height * ratio);
    doc.save("Ettisaf_Rup_Resume.pdf");
  } catch (err) {
    alert("PDF generation failed â€“ try another browser?");
    console.error(err);
  }
}

// Init
addExp();
addEdu();
addCert();  // start with one certification field
</script>
</body>
</html>